{% extends 'base.html' %}
{% block content %}
<style type="text/css">
    .marked{
        display: none;
    }
</style>
    <!-- Main Start -->
    <main>
		<!-- Services -->
		<section class="container my-4">
			<div class="row">
                <div class="col-3">
                    {% include 'trainer/left_sidebar.html' %}
                </div>
                <div class="col-9">
                    <h3 class="mb-4 border-bottom pb-1">Notifications <span class="badge bg-primary totalunread">{{notification.count}}</span></h3>
                    <span class="ajaxRes"></span>
                    <ul class="list-group notification-list">
                        {% for notif in notification %}
                        <li class="list-group-item">
                            {{notif.notif_msg}}
                            <span class="btn btn-primary btn-sm float-end">MarkRead</span>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
		</section>
		<!-- End -->
    </main>
    <!-- End -->
    <script>
        const webSocket = new WebSocket(
            'ws://'
            + window.location.host
            + '/ws/notifications/'
        );
    
        webSocket.onopen = function(event) {
            webSocket.send(JSON.stringify({
                'message': 'from client'
            }));
        }
    
        webSocket.onmessage = function(event) {
            console.log('Received:', event.data);
        }
    
        webSocket.onclose = function(event) {
            console.log('Closed');
        }
    </script>    
{% endblock %}